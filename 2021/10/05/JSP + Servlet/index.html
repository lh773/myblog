

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/myblog/img/favicon.png">
  <link rel="icon" href="/myblog/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
  <title>jsp+servlet - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/myblog/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/myblog/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"lh773.github.io","root":"/myblog/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/myblog/js/utils.js" ></script>
  <script  src="/myblog/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/myblog/">&nbsp;<strong>陌轩</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/myblog/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/myblog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/myblog/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/myblog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/myblog/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/myblog/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="jsp+servlet">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-10-05 00:00" pubdate>
        October 5, 2021 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      45
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">jsp+servlet</h1>
            
            <div class="markdown-body">
              <h1 id="JSP-Servlet"><a href="#JSP-Servlet" class="headerlink" title="JSP + Servlet"></a>JSP + Servlet</h1><h2 id="1-web相关概念"><a href="#1-web相关概念" class="headerlink" title="1.web相关概念"></a>1.web相关概念</h2><h3 id="1-1软件架构"><a href="#1-1软件架构" class="headerlink" title="1.1软件架构"></a>1.1软件架构</h3><ol>
<li><p>B/S 浏览器/服务器</p>
</li>
<li><p>C/S :客户端/服务器端</p>
</li>
</ol>
<h3 id="1-2资源分类"><a href="#1-2资源分类" class="headerlink" title="1.2资源分类"></a>1.2资源分类</h3><p>1.静态资源：所有的浏览器的结果都是一样的，称之为静态资源，静态资源直接可以被浏览器解析</p>
<p>HTML  CSS， JS</p>
<ol start="2">
<li>动态资源：每个用户访问相同的资源，所得的结果可能不同，这样的资源</li>
</ol>
<p>称位动态资源，动态资源需要先转为静态资源，然后在返回给浏览器</p>
<p>servlet / jsp ，php</p>
<h3 id="1-3网络三要素"><a href="#1-3网络三要素" class="headerlink" title="1.3网络三要素"></a>1.3网络三要素</h3><ol>
<li><p>IP地址：电子设备在网络中的唯一标识</p>
</li>
<li><p>端口号：应用程序在计算机中的唯一标识。0-65536</p>
</li>
<li><p>传输协议：规定了数据传输的规则</p>
</li>
</ol>
<p>​      UDP：不安全的协议，速度高</p>
<p>​      TCP：安全的协议，速度慢</p>
<h2 id="2-服务器"><a href="#2-服务器" class="headerlink" title="2.服务器"></a>2.服务器</h2><ol>
<li><p>概述：安装服务器软件的计算机</p>
</li>
<li><p>服务器软件：可以接受用户请求，处理请求并作出响应的软件</p>
</li>
</ol>
<p>​    部署web项目，让用户通过浏览器访问这些项目</p>
<p>​    动态资源必须依赖web服务器软件的，所有web软件亦被称为web容器</p>
<ol start="3">
<li>常见的java相关的web服务器软件</li>
</ol>
<p>​    webLogic ： Oracle公司</p>
<p>​     webSphere： IBM公司</p>
<p>​      JBOSS ：     jboss公司</p>
<p>Tomcat： Apache基金组织。中小型JavaEE服务器，支持少量的javaEE规范</p>
<p>开源，免费，Tomcat 支持集群，性能优异</p>
<h2 id="Tomca"><a href="#Tomca" class="headerlink" title="Tomca"></a>Tomca</h2><p>1.下载</p>
<ol start="2">
<li><p>安装</p>
</li>
<li><p>卸载</p>
</li>
<li><p>启动服务</p>
</li>
</ol>
<p>闪退 ：JAVA_HOME</p>
<p>​    启动报错 ：查看日记</p>
<ol start="5">
<li>访问</li>
</ol>
<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>概述：运行在服务器端的java小程序</p>
<p>执行原理：</p>
<p>1、服务器接收到浏览器请求，根据端口号后第一段字符串可以相应的找到项目。</p>
<p>2、找到对应项目后，tomcat可以找到该项目的web.xml</p>
<p>3、通过web.xml中的配置，去找是否有<url-pattern>与第二段字符匹配，如果有匹配，它会根据<servlet-name>找到相应的Servlet</p>
<p>4、通过反射机制创建该Servlet对象，调用service方法提供服务</p>
<h3 id="1-3生命周期"><a href="#1-3生命周期" class="headerlink" title="1.3生命周期"></a>1.3生命周期</h3><p>1、被创建：执行init（），该方法只执行一次</p>
<p>2、提供服务：执行service（），该方法执行多次</p>
<p>3、销毁：执行destory（）方法，该方法只执行一次</p>
<h3 id="1-4方法详解"><a href="#1-4方法详解" class="headerlink" title="1.4方法详解"></a>1.4方法详解</h3><p>1、init（）</p>
<p>​    初始化时机可以改变</p>
<p>注意：</p>
<p>servlet是单例模式，多个用户访问可能存在线程安全问题，所以尽可能不要在Servlet中声明成员变量或者修改值的操作</p>
<h2 id="2、HTTP-请求消息"><a href="#2、HTTP-请求消息" class="headerlink" title="2、HTTP-请求消息"></a>2、HTTP-请求消息</h2><h3 id="2-1概述"><a href="#2-1概述" class="headerlink" title="2.1概述"></a>2.1概述</h3><p>1、基于TCP/IP高级协议，安全的</p>
<p>2、默认端口：80</p>
<p>3、基于请求/响应模型，一次请求对应一次响应</p>
<p>4、无状态的：每次请求都是相对独立，不共享数据</p>
<h3 id="2-3、历史版本"><a href="#2-3、历史版本" class="headerlink" title="2.3、历史版本"></a>2.3、历史版本</h3><p>1.1.0：每一次</p>
<p>2.1.1：复用连接</p>
<h3 id="2-4请求消息"><a href="#2-4请求消息" class="headerlink" title="2.4请求消息"></a>2.4请求消息</h3><p>1、请求行</p>
<p>2、请求头</p>
<p>3、请求空格</p>
<p>4、请求体</p>
<p>请求行：</p>
<p>格式：</p>
<p>请求方式有七中</p>
<p>请求头：</p>
<p>host：发送请求的主机</p>
<p>请求空格：用于分割请求头和请求体</p>
<p>请求体</p>
<p>​    用于封装post请求信息的请求参数，采用键值对的存储方式</p>
<p>参数名=数据</p>
<h3 id="3、Request对象"><a href="#3、Request对象" class="headerlink" title="3、Request对象"></a>3、Request对象</h3><h4 id="3-1获取请求行"><a href="#3-1获取请求行" class="headerlink" title="3.1获取请求行"></a>3.1获取请求行</h4><p>1、获取请求方式：String getMETHOD()</p>
<p>2、获取虚拟目录：String getContextPath()</p>
<p>3、获取servlet访问路径:String getServletPath()</p>
<p>4、获取URI:String getRequestURI()</p>
<p>5、获取URL:String getRequestURL()</p>
<h3 id="3-2获取请求头"><a href="#3-2获取请求头" class="headerlink" title="3.2获取请求头"></a>3.2获取请求头</h3><p>1、String getHender(String name):通过请求头的名称获取请求头的值</p>
<p>2、Enumeration getHeaderNames()</p>
<p>​        Enumeration:相当于迭代器</p>
<p>3、获取客户机的ip地址：String getRemoteAddr()</p>
<h3 id="3-3获取请求体数据"><a href="#3-3获取请求体数据" class="headerlink" title="3.3获取请求体数据"></a>3.3获取请求体数据</h3><p>步骤：</p>
<p>1、获取流对象：</p>
<p>BufferReader getReader()</p>
<p>ServletinputStream getinputStream()</p>
<p>2、从流中读取请求体数据</p>
<h3 id="3-4其他方法"><a href="#3-4其他方法" class="headerlink" title="3.4其他方法"></a>3.4其他方法</h3><p>1、根据参数名获取参数值：String getParqmeter(String name)</p>
<p>2、根据参数名获取参数值的数组：String[] getParameterValues(String name)</p>
<p>3、获取所有参数的参数名字Enumeration getParameterNames</p>
<p>4、获取所有参数的map集合：Map&lt;String,string[]&gt; getParameterMap()</p>
<h3 id="3-5请求转发"><a href="#3-5请求转发" class="headerlink" title="3.5请求转发"></a>3.5请求转发</h3><p>概述：一种在服务器内部的资源跳转</p>
<p>步骤：</p>
<p>1、通过request对象获取请求转发对象：RequestDispatcher</p>
<p>2、调用转发对象的forward()方法进行转发</p>
<p>特点：</p>
<p>1、浏览器地址栏不发生变化</p>
<p>2、只能转发当前服务器内部资源</p>
<p>3、转发是一次请求，无论内部跳转多少次，调用几个Servlet，它使用的是同一次请求</p>
<p>共享数据：</p>
<p>1、域对象：一个有作用范围的对象，它可以在范围内共享对象</p>
<h3 id="Request和Response"><a href="#Request和Response" class="headerlink" title="Request和Response"></a>Request和Response</h3><p><img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210714145054690.png" srcset="/myblog/img/loading.gif" lazyload alt="image-20210714145054690"></p>
<h2 id="3、Http响应-响应消息"><a href="#3、Http响应-响应消息" class="headerlink" title="3、Http响应-响应消息"></a>3、Http响应-响应消息</h2><h3 id="1-1、概述："><a href="#1-1、概述：" class="headerlink" title="1.1、概述："></a>1.1、概述：</h3><p>服务器发给客服端的消息</p>
<h3 id="1-2组成"><a href="#1-2组成" class="headerlink" title="1.2组成"></a>1.2组成</h3><p>1.响应行</p>
<p>2.响应头</p>
<p>3.响应空格</p>
<p>4.响应体</p>
<h3 id="1-3响应行"><a href="#1-3响应行" class="headerlink" title="1.3响应行"></a>1.3响应行</h3><p>http/1.1 200(相应描述)</p>
<p>1、组成：协议/版本号 响应状态码</p>
<p>2.响应状态码：</p>
<p>1XX：服务器接收客服端消息，但没完成接收，等待一段时间后，会向客户端发送1XX，询问是否继续发送消息</p>
<p>2XX：成功，代表：200</p>
<p>3XX：重定向，资源的跳转方式，代表：302重方向，304-访问缓存</p>
<p>4XX：客户端错误，比如访路径有问题，找不到资源，会出现404</p>
<p>5XX：服务器错误，如果代码出现异常，会出现500</p>
<h3 id="1-4响应头："><a href="#1-4响应头：" class="headerlink" title="1.4响应头："></a>1.4响应头：</h3><p>1.Content-Type：服务器告诉浏览器本次响应的格式和编码格式</p>
<p>2.Content-disposition:服务器告诉客户端以什么格式打开响应数据，如果没有设置，用默认值</p>
<p>in-line：默认值，在当前页面内打开</p>
<p>attchment;filename=XXX;以附件形式打开响应体，即下载文件</p>
<h2 id="4、Response对象"><a href="#4、Response对象" class="headerlink" title="4、Response对象"></a>4、Response对象</h2><p>1、设置状态码:setStatus(int sc)</p>
<p>2、设置响应头：setHeader(String name,String value)</p>
<p>3、设置过响应体：</p>
<p>​    1、获取输出流</p>
<p>​    2、通过输出流将数据输出到客户端浏览器</p>
<p>4、转发和重定向的特点：</p>
<p><strong>1、转发：</strong></p>
<p>​        地址栏路径不发生变化</p>
<p><strong>2、重定向</strong></p>
<p>​        地址栏发送变化</p>
<p>​        多次请求，所以不能通过request对象共享数据</p>
<p>​        可以访问其他服务器资源</p>
<p><strong>3.路径写法</strong>：</p>
<p>分类：</p>
<p>​    <strong>相对路径</strong>：以当前资源为起点，到目标资源所需要的路径</p>
<p>​            ../开头    （../表示上一级目录）</p>
<p>​    绝对路径：以/开头</p>
<p><strong>localhost：</strong>8080/虚拟路径，这部分内容是固定的，所以可以省略</p>
<p><strong>判断路径给谁用</strong></p>
<p>​    如果是给服务器用，则不需要加虚拟路径    比如：转发</p>
<p>​    如果是给浏览器用的，需要加虚拟路径</p>
<h2 id="5、ServletContext对象"><a href="#5、ServletContext对象" class="headerlink" title="5、ServletContext对象"></a>5、ServletContext对象</h2><h3 id="5-1概述"><a href="#5-1概述" class="headerlink" title="5.1概述"></a>5.1概述</h3><p>​    它代表整个web应用，是servlet中最大的一个接口</p>
<h3 id="5-2获取"><a href="#5-2获取" class="headerlink" title="5.2获取"></a>5.2获取</h3><p>1.通过request对象获取</p>
<p>​    req.getServletContext();</p>
<p>2.通过HttpServlet对象获取</p>
<p>​        this.getServletContext();</p>
<h3 id="5-3域对象"><a href="#5-3域对象" class="headerlink" title="5.3域对象"></a>5.3域对象</h3><p>所以能共享数据，他的作用是最大的，所有用户的所用数据</p>
<h3 id="5-4获取MIME类型"><a href="#5-4获取MIME类型" class="headerlink" title="5.4获取MIME类型"></a>5.4获取MIME类型</h3><p>1、MIME类型：在互联网通信中定义的一种文件类型</p>
<p>2、格式：大数据类型/小数据类型，比如text/html</p>
<p>3、获取：getMimeType(String fileName)通过文件扩展名</p>
<p>4、扩展名对应的Mime</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xatu.Demo;<br><br><span class="hljs-keyword">import</span> javax.servlet.Servlet;<br><span class="hljs-keyword">import</span> javax.servlet.ServletContext;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.ServletOutputStream;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Class_NAME</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Lenovo</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/7/15</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@WebServlet(urlPatterns = &quot;/RequestDemo4&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RequestDemo4</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        doPost(req,resp);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        <span class="hljs-comment">//获取文件夹</span><br>        String filename=req.getParameter(<span class="hljs-string">&quot;filename&quot;</span>);<br>        ServletContext servletContext=req.getServletContext();<br>        String path=servletContext.getRealPath(<span class="hljs-string">&quot;/img/&quot;</span>+filename);<br>        resp.setHeader(<span class="hljs-string">&quot;content-disposition&quot;</span>,<span class="hljs-string">&quot;attachment;filename=&quot;</span>+filename);<br><br>        FileInputStream inputStream=<span class="hljs-keyword">new</span> FileInputStream(path);<br>        ServletOutputStream outputStream=resp.getOutputStream();<br><br>        <span class="hljs-comment">//读取</span><br>        <span class="hljs-keyword">byte</span>[] bytes=<span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-keyword">int</span> len=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((len=inputStream.read(bytes))!=-<span class="hljs-number">1</span>)&#123;<br>            outputStream.write(bytes,<span class="hljs-number">0</span>,len);<br>        &#125;<br>        inputStream.close();<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>



<h2 id="6-会话技术"><a href="#6-会话技术" class="headerlink" title="6.会话技术"></a>6.会话技术</h2><h3 id="1-1-概述："><a href="#1-1-概述：" class="headerlink" title="1.1.概述："></a>1.1.概述：</h3><p>一次会话包含多次请求和响应，并且可以在会话范围内可以共享数据</p>
<h3 id="1-2功能"><a href="#1-2功能" class="headerlink" title="1.2功能"></a>1.2功能</h3><p>共享</p>
<h3 id="1-3分类"><a href="#1-3分类" class="headerlink" title="1.3分类"></a>1.3分类</h3><p>客户端：Cookie</p>
<p>服务端：Session</p>
<h3 id="1-4Cookie"><a href="#1-4Cookie" class="headerlink" title="1.4Cookie"></a>1.4Cookie</h3><p><strong>常用方法</strong>：</p>
<p>1.创建Cookie对象new Cookie（String name,String value）</p>
<p>2.发送Cookie：response.addCookie(String name)</p>
<p>3.获取Cookie对象：request.getCookies()</p>
<p><strong>注意事项</strong>:</p>
<p>1.发送多个Cookie：创建多个Cookie对象。多次调用resp.addCookie()</p>
<p>2.保存时长</p>
<p>​        默认情况下：浏览器关闭，Cookie数据被销毁</p>
<p>​        setMaxAge(int seconds)</p>
<p>​        <strong>正数</strong>：将Cookie数据写到硬盘文件中持续化储存，seconds表示存储文件的时长，单位为秒</p>
<p>​        <strong>负数：</strong>默认值</p>
<p>​        <strong>0：</strong>删除cookie信息</p>
<p>3.Tomcat 8之前，不能之间存储中文数据</p>
<p>4.Cookie获取范围</p>
<p>​    同一服务器多个web项目</p>
<p> 默认情况下，一个服务器的多个web项目不能共享数据</p>
<p>我们可以通过setPath(“/“)来实现多个web项目共享</p>
<p>不同服务器</p>
<p>​    通过setDomain()方法，设置相同的一级域名，那么在相同的一级域名下Cookie可以实现数据共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xatu.Demo;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.Cookie;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> javax.xml.crypto.Data;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.URLDecoder;<br><span class="hljs-keyword">import</span> java.net.URLEncoder;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Class_NAME</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Lenovo</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/7/15</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@WebServlet(urlPatterns = &quot;/Cookie3&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CookieServlet3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        doPost(req, resp);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>        resp.setContentType(<span class="hljs-string">&quot;text/html;charSet=utf-8&quot;</span>);<br>        <span class="hljs-comment">//1、获取所用Cookie信息</span><br>        Cookie[] cookies = req.getCookies();<br><br>        <span class="hljs-comment">//2、遍历cookie</span><br>        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<span class="hljs-comment">//用于标识是否有lastTime</span><br>        <span class="hljs-keyword">if</span> (cookies != <span class="hljs-keyword">null</span> &amp;&amp; cookies.length &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">for</span> (Cookie cookie : cookies) &#123;<br>                <span class="hljs-comment">//3、获取cookie名称</span><br>                String name = cookie.getName();<br>                <span class="hljs-comment">//4、判段</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;lastTime&quot;</span>.equals(name)) &#123;<br>                    <span class="hljs-comment">//存在，不是第一次</span><br>                    <span class="hljs-comment">//4.1获取lastTime对应的值，并响应</span><br>                    String value = cookie.getValue();<br><br>                    <span class="hljs-comment">//URL解码</span><br>                    value= URLDecoder.decode(value,<span class="hljs-string">&quot;utf-8&quot;</span>);<br>                    resp.getWriter().write(<span class="hljs-string">&quot;&lt;h1&gt;您上一次登录的时间：&quot;</span> + value + <span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>);<br><br><br>                    <span class="hljs-comment">//4.2 更新lastTime的值</span><br>                    Date date = <span class="hljs-keyword">new</span> Date();<br>                    SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;yyyy年MM月dd日-hh时mm分ss秒&quot;</span>);<br>                    String format = sdf.format(date);<br>                    cookie.setValue(format);<br>                    <span class="hljs-comment">//设置存活时长</span><br>                    cookie.setMaxAge(<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>);<br>                    <span class="hljs-comment">//4.4发送cookie</span><br>                    resp.addCookie(cookie);<br>                    flag = <span class="hljs-keyword">true</span>;<br>                &#125;<br><br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//5.第一次访问</span><br>        <span class="hljs-keyword">if</span> (cookies == <span class="hljs-keyword">null</span> || cookies.length == <span class="hljs-number">0</span> || flag == <span class="hljs-keyword">false</span>) &#123;<br>            <span class="hljs-comment">//5.1获取当前时间</span><br>            Date date = <span class="hljs-keyword">new</span> Date();<br>            SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;yyyy年MM月dd日&quot;</span>);<br>            String format = sdf.format(date);<br>             format= URLEncoder.encode(format,<span class="hljs-string">&quot;utf-8&quot;</span>);<br>            <span class="hljs-comment">//</span><br>            Cookie cookie=<span class="hljs-keyword">new</span> Cookie(<span class="hljs-string">&quot;lastTime&quot;</span>,format);<br>            <span class="hljs-comment">//5.3设置时长</span><br>            cookie.setMaxAge(<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">24</span>);<br>            <span class="hljs-comment">//5.4发送cookie</span><br>            resp.addCookie(cookie);<br>            flag=<span class="hljs-keyword">true</span>;<br>            <span class="hljs-comment">//5.5响应</span><br>            format= URLEncoder.encode(format,<span class="hljs-string">&quot;utf-8&quot;</span>);<br>            resp.getWriter().write(<span class="hljs-string">&quot;&lt;h1&gt;这是第一次访问的时间：&quot;</span>+<span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>);<br><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<p><strong>特点：</strong></p>
<p>1.cookie存储数据在客户端浏览器,s所以它是不安全的</p>
<p>2.大小限制：每个Cookie大小4kb,同一域名下，Cookie数量不超过20个</p>
<p><strong>作用：</strong></p>
<p>1、存储少量，内容不敏感的数据</p>
<p>2、在不登陆的情况下，完成服务器对用户信息的识别（主要用途）</p>
<h2 id="7、JSP"><a href="#7、JSP" class="headerlink" title="7、JSP"></a>7、JSP</h2><p><strong>概念：</strong>JSP部署于网络服务器上，可以响应客户端发送的请求，并根据请求内容动态地生成<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/HTML">HTML</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/XML">XML</a>或其他格式文档的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Web">Web</a>网页，然后返回给请求者。JSP技术以<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Java">Java</a>语言作为<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80">脚本语言</a>，为用户的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/HTTP">HTTP</a>请求提供服务，并能与服务器上的其它Java程序共同处理复杂的业务需求。</p>
<h3 id="7-3Jsp内置对象"><a href="#7-3Jsp内置对象" class="headerlink" title="7.3Jsp内置对象"></a>7.3Jsp内置对象</h3><p><strong>概述：</strong></p>
<p>​    在jsp页面中，不需要创建和获取，可以直接使用的对象</p>
<p>对象：</p>
<p>1、session</p>
<p>2、out</p>
<p>3.page</p>
<p>4、application</p>
<p>5、config</p>
<p>6、exception</p>
<p>7.pageContext</p>
<p>8.Request</p>
<p>9.Response</p>
<h3 id="7-4Session"><a href="#7-4Session" class="headerlink" title="7.4Session"></a>7.4Session</h3><p><strong>概述：</strong></p>
<p>​    服务器端会话技术</p>
<p><strong>功能</strong>：</p>
<p>​    1、获取HttpSession对象：request.getSession()</p>
<p>​    2、使用HttpSession对象：</p>
<p>​        SetAttribute</p>
<p>​        getAttribute</p>
<p>​        removeAttribute</p>
<p><strong>实现原理：</strong></p>
<p>Serrion的实现是依赖于Cookie</p>
<p>第一次发送请求，服务器会创建Session对象，并设置唯一的id属性，并在响应时，将Session对象对应的ID存入响应头；</p>
<p>set.cookie:JSESSIONID=id属性</p>
<p>当第二次发送请求时，cookie中就有对应的session id，web服务器读取请求头数据后，会将两次会话中使用的session对象指向同一个session对象</p>
<p><strong>注意：</strong></p>
<p>1、客户端浏览器关闭后，再次打开，获取的对象是同一个吗？</p>
<p>​    默认情况下，因为浏览器关闭，Cookie会被清空</p>
<p>2、服务器重启时，两个会话的session时同一个吗？</p>
<p>​    因为服务器重启，session会被清空，所以很难得到同一个session对象</p>
<p>解决：session的钝化和活化</p>
<p>​        钝化：将session的数据序列化磁盘上</p>
<p>​        活化：在服务器启动后，将session文件序列化session对象后即可</p>
<p>3、session什么时候销毁：</p>
<p>​    服务器关闭</p>
<p>4、特点：</p>
<p>session对象用于存储一次会话中多次请求的数据，存储在服务器端</p>
<p>session可以存储任意类型的数据，任意大小的数据</p>
<p>5、session可cookie的区别：</p>
<p>session存储在服务器端，cookie存储在客户端</p>
<p>session的数据比较安全，cookie的数据不安全</p>
<p>cookie的大小有限制，session的大小没限制</p>
<h3 id="7-5JSP指令"><a href="#7-5JSP指令" class="headerlink" title="7.5JSP指令"></a>7.5JSP指令</h3><p>作用：</p>
<p>用于配置Jsp页面，导入资源文件</p>
<p>格式：</p>
<p>&lt;%@指令名称 属性名1=属性值1…%&gt;</p>
<p>分类：‘</p>
<p>1、page用于配置jsp页面</p>
<p>2、includ：页面包含</p>
<p>3、taglib：导入资源文件，Jstl标签，就需要使用该指令导入</p>
<h3 id="7-6MVC开发模式"><a href="#7-6MVC开发模式" class="headerlink" title="7.6MVC开发模式"></a>7.6MVC开发模式</h3><p>1、MVC</p>
<p>M-Model模型 Javabean</p>
<p>​        完成具体业务操作：查数据库，封装对象</p>
<p>V-View视图层JSP HTML</p>
<p>​    用于展示数据</p>
<p>C-controller控制层Servlet与业务逻辑的</p>
<p>​        获取用户请求、</p>
<p>​        调用模型</p>
<p>​        将数据交给视图层展示</p>
<h3 id="7-7、E-L表达式"><a href="#7-7、E-L表达式" class="headerlink" title="7.7、E-L表达式"></a>7.7、E-L表达式</h3><p>语法：</p>
<p>${}</p>
<p>使用：</p>
<p>1、运算</p>
<p>2、取值</p>
<p>E-L表达式可以从与对象中获取</p>
<p>语法：${域对象名：域名}</p>
<p>隐式对象：</p>
<p>1、E-L表达式中可以直接使用的对象</p>
<h3 id="7-8、JSTL标签"><a href="#7-8、JSTL标签" class="headerlink" title="7.8、JSTL标签"></a>7.8、JSTL标签</h3><p>JSTL：java Servlet Page Tage Library JSp标签库</p>
<p>1、使用</p>
<p>​        导入jsp相关jar包</p>
<p>​        导入标签库：taglib指令</p>
<p>2、c:if标签</p>
<p>   test属性是必须的，属性值为true，则显示该标签页包裹的静态内容，为flase则不显示标签包裹的内容</p>
<p> c:if没有else，如果是多个选择分支，则写多个c:if即可</p>
<p>3.choose标签</p>
<p>4.c:foreach</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>（<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++）<br><br>​	属性：<br><br>​		begin：开始值（包含）<br><br>​		end：结束值（包含）<br><br><span class="hljs-keyword">var</span>：i<br><br>step：步长<br><br>varStatus:在普通<span class="hljs-keyword">for</span>循环中和<span class="hljs-keyword">var</span>相同含义<br>    index:索引<br>     count：循环次数   <br></code></pre></td></tr></table></figure>






























            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/myblog/categories/Java/">Java</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/myblog/2021/10/05/%E8%BF%99%E6%98%AF%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">
                        <span class="hidden-mobile">这是我的第一个博客</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/myblog/js/events.js" ></script>
<script  src="/myblog/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/myblog/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/myblog/js/local-search.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/myblog/js/boot.js" ></script>


</body>
</html>
